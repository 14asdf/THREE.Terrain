{"version":3,"file":"THREE.Terrain.min.js","sources":["THREE.Terrain.js"],"names":["THREE","Terrain","options","defaultOptions","easing","NoEasing","heightmap","DiamondSquare","material","maxHeight","maxVariation","minHeight","optimization","NONE","perlinScale","useBufferGeometry","xSegments","xSize","ySegments","ySize","opt","hasOwnProperty","unit","MeshBasicMaterial","color","scene","Scene","mesh","Mesh","PlaneGeometry","rotation","x","Math","PI","HTMLCanvasElement","Image","fromHeightmap","geometry","vertices","window","console","warn","Clamp","verticesNeedUpdate","normalsNeedUpdate","computeBoundingSphere","BufferGeometryUtils","fromGeometry","add","GEOMIPMAP","GEOCLIPMAP","POLYGONREDUCTION","generateBlendedMaterial","textures","uniforms","UniformsUtils","merge","ShaderLib","lambert","declare","assign","i","l","length","wrapS","wrapT","RepeatWrapping","needsUpdate","type","value","texture","v","levels","p","glsl","useLevels","j","n","blendAmount","params","fog","lights","vertexShader","replace","fragmentShader","ShaderChunk","color_pars_fragment","map_pars_fragment","lightmap_pars_fragment","envmap_pars_fragment","fog_pars_fragment","shadowmap_pars_fragment","specularmap_pars_fragment","logdepthbuf_pars_fragment","logdepthbuf_fragment","map_fragment","alphatest_fragment","specularmap_fragment","lightmap_fragment","color_fragment","envmap_fragment","shadowmap_fragment","linear_to_gamma_fragment","fog_fragment","join","ShaderMaterial","g","canvas","document","createElement","context","getContext","rows","cols","spread","width","height","drawImage","data","getImageData","row","col","idx","z","toHeightmap","d","createImageData","round","putImageData","Smooth","Array","xl","sum","m","key","k","Corner","maxVar","maxVarHalf","s","t","b","r","random","segments","max","pow","size","smoothing","yl","half","whole","y","avg","e","noise","perlin","Perlin","seed","range","divisor","min","simplex","Simplex","MultiPass","passes","gran","granularity","move","method","Infinity","actualRange","optMax","optMin","targetMax","targetMin","EaseIn","EaseOut","EaseInOut","InEaseOut","PerlinDiamond","SimplexCorner"],"mappings":"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"}