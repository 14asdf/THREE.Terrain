{"version":3,"file":"THREE.Terrain.min.js","sources":["THREE.Terrain.js"],"names":["THREE","Terrain","options","defaultOptions","heightmap","DiamondSquare","material","maxHeight","maxVariation","minHeight","optimization","NONE","perlinScale","useBufferGeometry","xSegments","xSize","ySegments","ySize","opt","hasOwnProperty","unit","MeshBasicMaterial","color","scene","Scene","mesh","Mesh","PlaneGeometry","rotation","x","Math","PI","HTMLCanvasElement","Image","fromHeightmap","geometry","vertices","window","console","warn","verticesNeedUpdate","normalsNeedUpdate","computeBoundingSphere","BufferGeometryUtils","fromGeometry","add","GEOMIPMAP","GEOCLIPMAP","POLYGONREDUCTION","generateBlendedMaterial","textures","uniforms","declare","assign","i","l","length","wrapS","wrapT","RepeatWrapping","type","value","texture","v","levels","p","glsl","useLevels","j","n","blendAmount","params","fog","lights","UniformsUtils","merge","ShaderLib","lambert","vertexShader","replace","fragmentShader","ShaderChunk","color_pars_fragment","map_pars_fragment","lightmap_pars_fragment","envmap_pars_fragment","fog_pars_fragment","shadowmap_pars_fragment","specularmap_pars_fragment","logdepthbuf_pars_fragment","logdepthbuf_fragment","map_fragment","alphatest_fragment","specularmap_fragment","lightmap_fragment","color_fragment","envmap_fragment","shadowmap_fragment","linear_to_gamma_fragment","fog_fragment","join","log","ShaderMaterial","g","canvas","document","createElement","context","getContext","rows","cols","spread","width","height","drawImage","data","getImageData","row","col","idx","z","toHeightmap","d","createImageData","round","putImageData","Corner","maxVar","maxVarHalf","xl","k","s","t","b","r","random","m","clamp","segments","max","pow","size","smoothing","yl","half","whole","y","avg","e","noise","perlin","Perlin","seed","range","divisor","min","simplex","Simplex","MultiPass","passes","gran","granularity","move","method","Clamp","Infinity","actualRange","targetMax","targetMin","PerlinDiamond","SimplexCorner"],"mappings":"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"}