{"version":3,"file":"THREE.Terrain.min.js","sources":["THREE.Terrain.js"],"names":["THREE","Terrain","options","defaultOptions","heightmap","DiamondSquare","material","maxHeight","maxVariation","minHeight","optimization","NONE","perlinScale","useBufferGeometry","xSegments","xSize","ySegments","ySize","opt","hasOwnProperty","unit","MeshBasicMaterial","color","scene","Scene","mesh","Mesh","PlaneGeometry","rotation","x","Math","PI","HTMLCanvasElement","Image","fromHeightmap","geometry","vertices","window","console","warn","verticesNeedUpdate","normalsNeedUpdate","computeBoundingSphere","BufferGeometryUtils","fromGeometry","add","GEOMIPMAP","GEOCLIPMAP","POLYGONREDUCTION","generateBlendedMaterial","textures","uniforms","UniformsUtils","merge","ShaderLib","lambert","declare","assign","i","l","length","wrapS","wrapT","RepeatWrapping","needsUpdate","type","value","texture","v","levels","p","glsl","useLevels","j","n","blendAmount","params","fog","lights","vertexShader","replace","fragmentShader","ShaderChunk","color_pars_fragment","map_pars_fragment","lightmap_pars_fragment","envmap_pars_fragment","fog_pars_fragment","shadowmap_pars_fragment","specularmap_pars_fragment","logdepthbuf_pars_fragment","logdepthbuf_fragment","map_fragment","alphatest_fragment","specularmap_fragment","lightmap_fragment","color_fragment","envmap_fragment","shadowmap_fragment","linear_to_gamma_fragment","fog_fragment","join","ShaderMaterial","g","canvas","document","createElement","context","getContext","rows","cols","spread","width","height","drawImage","data","getImageData","row","col","idx","z","toHeightmap","d","createImageData","round","putImageData","Corner","maxVar","maxVarHalf","xl","k","s","t","b","r","random","m","clamp","segments","max","pow","size","smoothing","yl","half","whole","y","avg","e","noise","perlin","Perlin","seed","range","divisor","min","simplex","Simplex","MultiPass","passes","gran","granularity","move","method","Clamp","Infinity","actualRange","targetMax","targetMin","PerlinDiamond","SimplexCorner"],"mappings":"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"}